% リリースチャネル

Rustプロジェクトはリリース管理に「リリースチャネル」という概念を使います。
このプロセスを理解することは、どのバージョンのRustをあなたのプロジェクトで使うべきかを選択するために重要です。

# 概要

Rustのリリースには3つのチャネルがあります。

* ナイトリー版
* ベータ版
* 安定版

新しいナイトリーリリースは1日1回生成されます。
6週間ごとに最新のナイトリーリリースが「ベータ版」に昇格します。
その時点で、それは深刻なエラーを修正するパッチしか受け取らなくなります。
さらに6週間後に、ベータ版は「安定版」に昇格し、`1.x`の次のリリースになります。

このプロセスは並列に進行します。
6週間ごとに、同じ日に、ナイトリー版はベータ版に、ベータ版は安定版になります。
`1.x`がリリースされたとき、同時に、`1.(x + 1)-beta`がリリースされ、ナイトリー版は`1.(x + 2)-nightly`の最初のバージョンになります。

# バージョンの選択

一般的に言って、あなたに特別な理由がない限り、安定リリースチャネルを使うべきです。
それらのリリースは一般の人々に向けられたものです。

しかし、あなたのRustへの関心度によって、あなたは代わりにナイトリー版を選択するかもしれません。
基本的なトレードオフは次のとおりです。ナイトリーチャネルでは、不安定なRustの新機能を使うことができます。
しかし、不安定な機能は変更を予定しているので、新しいナイトリーリリースではあなたのコードが動かなくなる可能性があります。
もしあなたが安定リリースを使うのであれば、あなたは試験的な機能を使うことができませんが、破壊的変更によってRustの次のリリースが重大な問題を引き起こすことはないでしょう。

# エコシステムのCIによる助力

ベータ版はどうでしょうか。
私たちは安定リリースチャネルを使う全てのRustユーザーに、継続的インテグレーションシステムを使ったベータチャネルでのテストを勧めます。
これは偶発的なリグレッションが起きた場合に、チームに警告を発してくれるでしょう。

加えて、ナイトリー版でのテストではもっと速くリグレッションを見付けられます。もしあなたが、ビルドが3つになることを気にしないのであれば、全てのチャネルでテストしてもらえればありがたいです。

例として、多くのRustプログラマーはフリーでオープンソースなプロジェクトのクレートのテストに[Travis](https://travis-ci.org/)を使っています。
Travisは[Rustを直接サポートしているので][travis]、あなたは全てのチャネルでテストするためにこのような`.travis.yml`を使うことができます。

```yaml
language: rust
rust:
  - nightly
  - beta
  - stable

matrix:
  allow_failures:
    - rust: nightly
```

[travis]: http://docs.travis-ci.com/user/languages/rust/

この設定では、Travisは3つ全てのチャネルでテストを行います。ただし、ナイトリー版で何か問題が起きたときには、あなたのビルドは失敗にはなりません。
どのCIシステムでも似たような設定が推奨されるので、詳細についてはあなたの使っているシステムのドキュメントをチェックしましょう。
